<% provide(:title, "Profile") %>
<div class="profile-wrap">
  <div class="row">
    <div class="col-md-2 text-center">
      <%= image_tag avatar_url(@user), class: "avt-img" %>
    </div>
    <div class="col-md-10">
      <div class="row">
        <h1><%= @user.name %></h1>
        <% if @user == current_user %>
          <%= link_to "プロフィールを編集", edit_user_registration_path, class: "btn btn-outline-dark common-btn edit-profile-btn" %>
          <button type="button" class="setting" data-toggle="modal" data-target="#exampleModal"></button>

          <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="exampleModalLabel">設定</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">×</span>
                  </button>
                </div>
                <div class="list-group text-center">
                  <%= link_to "パスワードを変更", "#", class: "list-group-item list-group-item-action" %>
                  <%= link_to "サインアウト", destroy_user_session_path, method: :delete, class: "list-group-item list-group-item-action" %>
                  <%= link_to "キャンセル", "#", class: "list-group-item list-group-item-action", "data-dismiss": "modal" %>
                </div>
              </div>
            </div>
          </div>
        <% else %>
           <div id="follow_form">
            <% if current_user.following?(@user) %>
              <%= render 'unfollow' %>
            <% else %>
              <%= render 'follow' %>
            <% end %>
        <% end %>
      </div>
      <div class="row">
        <div class="col-md-4">
          <p><%= "投稿 #{@user.posts.count} 件" %></p>
        </div>
        <div class="col-md-4">
          <p><%= "フォロワー#{@user.followers.count}人" %></p>
        </div>
        <div class="col-md-4">
          <p><%= "#{@user.following.count}人フォロー中" %></p>
        </div>
      </div>
      <div class="row">
        <div class="col-md-8">
          <p><%= @user.self_intro %></p>
        </div>
      </div>
    </div>
  </div>
  <div class="row mt-5">
    <div class="col-md-10 offset-md-2">
      <div class="tab-content pb-4" id="nav-tabContent">
        <div class="tab-pane fade show active" id="nav-posts" role="tabpanel" aria-labelledby="nav-posts-tab">
          <div class="row">
            <%= render "posts/photos_list", {posts: @posts}%>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>